# Apache configuration for security headers
# Note: Content Security Policy (CSP) and other security headers are now handled 
# by the Express backend via Helmet middleware to ensure consistent nonce-based CSP implementation.
# This prevents duplicate headers and allows for proper nonce generation per request.

# Security headers for static content and error pages
<IfModule mod_headers.c>
    # X-Content-Type-Options: Prevent MIME type sniffing
    Header always set X-Content-Type-Options "nosniff"
    
    # X-Frame-Options: Prevent clickjacking
    Header always set X-Frame-Options "DENY"
    
    # X-XSS-Protection: Enable XSS filtering
    Header always set X-XSS-Protection "1; mode=block"
    
    # Referrer-Policy: Control referrer information
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
    
    # Strict-Transport-Security: Force HTTPS
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
</IfModule>

# Force HTTPS connections
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{HTTPS} !=on
    RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</IfModule>