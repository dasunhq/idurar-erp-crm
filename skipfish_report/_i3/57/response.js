var res = {'data':'HTTP/1.1 200 Partial Content\x0aServer: nginx/1.29.1\x0aDate: Wed, 01 Oct 2025 06:45:35 GMT\x0aContent-Type: application/javascript\x0aContent-Length: 4233\x0aLast-Modified: Wed, 01 Oct 2025 04:26:03 GMT\x0aConnection: keep-alive\x0aETag: \x2268dcad5b-1089\x22\x0aExpires: Thu, 01 Oct 2026 06:45:35 GMT\x0aCache-Control: max-age=31536000\x0aCache-Control: public, immutable\x0aContent-Range: bytes 0-4232/4233\x0a\x0aimport{aq as L,ar as N,ap as I,a,ah as e,as as A,ax as F}from\x22./index-C4nMWe5y.js\x22;import{a0 as g,a2 as S,E as T,G as b,Y as P,W as E,X as _}from\x22./IdurarOs-BCtZVZqe.js\x22;import\x22./index-CCAhvlYD.js\x22;import{a as R,b as $,c as w,E as D}from\x22./selectors-DquMLP7b.js\x22;import{e as p}from\x22./actions-ysozhQMY.js\x22;import{P as M}from\x22./index-Ci5STuGe.js\x22;import{s as v}from\x22./index-KrFx5yLV.js\x22;import{u as Y}from\x22./useMoney-5XCsrR9m.js\x22;import\x22./ErpApp-BZucdkXu.js\x22;import{P as B,F as k}from\x22./PaymentForm-Ckxurmtb.js\x22;import{c as C}from\x22./calculate-DbSGk6nY.js\x22;import{D as m}from\x22./index-IHz-65YD.js\x22;import{C as O}from\x22./CloseCircleOutlined-Bi0FNh2q.js\x22;import\x22./DownOutlined-BXn_Bs08.js\x22;import\x22./index-D1pTFRzE.js\x22;import\x22./index-DyraH4Lq.js\x22;import\x22./useFetch-CPBJnrcm.js\x22;import\x22./color-CnuJOIlI.js\x22;import\x22./index-Bc3jZFJd.js\x22;import\x22./useDate-BK7OBCbi.js\x22;import\x22./index-6VrU-YIl.js\x22;function W({config:o}){const n=L(),s=b();let{entity:r}=o;const c=N(),{isLoading:d,isSuccess:u,current:i}=I(R),[h]=g.useForm(),[t,f]=a.useState(0);a.useEffect(()=\x3e{if(i){const{credit:l,total:x,discount:y}=i;f(C.sub(C.sub(x,y),l))}},[i]),a.useEffect(()=\x3e{u&&(h.resetFields(),c(p.resetAction({actionType:\x22recordPayment\x22})),c(p.list({entity:r})),n(`/${r}/`))},[u]);const j=l=\x3e{if(i){const{_id:x}=i,y=i.client&&i.client._id;l={...l,invoice:x,client:y}}c(p.recordPayment({entity:\x22payment\x22,jsonData:l}))};return e.jsx(S,{isLoading:d,children:e.jsxs(g,{form:h,layout:\x22vertical\x22,onFinish:j,children:[e.jsx(B,{maxAmount:t}),e.jsx(g.Item,{children:e.jsx(T,{type:\x22primary\x22,htmlType:\x22submit\x22,children:s(\x22Record Payment\x22)})})]})})}function q({config:o,currentItem:n}){const s=b(),{entity:r,ENTITY_NAME:c}=o,d=Y(),u=L(),[i,h]=a.useState([]),[t,f]=a.useState(n),[j,l]=a.useState({});return a.useEffect(()=\x3e{t!=null&&t.client&&l(t.client)},[t]),a.useEffect(()=\x3e{const x=new AbortController;if(n){const{items:y}=n;h(y),f(n)}return()=\x3ex.abort()},[n]),e.jsxs(e.Fragment,{children:[e.jsx(P,{gutter:[12,12],children:e.jsxs(E,{className:\x22gutter-row\x22,xs:{span:24},sm:{span:24},md:{span:24},lg:{span:20,push:2},children:[e.jsx(M,{onBack:()=\x3eu(`/${r.toLowerCase()}`),title:`Record Payment for ${c} # ${t.number}/${t.year||\x22\x22}`,ghost:!1,tags:e.jsx(\x22span\x22,{children:t.paymentStatus&&s(t.paymentStatus)}),extra:[e.jsx(T,{onClick:()=\x3e{u(`/${r.toLowerCase()}`)},icon:e.jsx(O,{}),children:s(\x22Cancel\x22)},`${v.generate()}`),e.jsx(T,{onClick:()=\x3eu(`/invoice/read/${t._id}`),icon:e.jsx(k,{}),children:s(\x22Show Invoice\x22)},`${v.generate()}`)],style:{padding:\x2220px 0px\x22}}),e.jsx(_,{dashed:!0})]})}),e.jsxs(P,{gutter:[12,12],children:[e.jsxs(E,{className:\x22gutter-row\x22,xs:{span:24,order:2},sm:{span:24,order:2},md:{span:10,order:2,push:2},lg:{span:10,order:2,push:4},children:[e.jsx(\x22div\x22,{className:\x22space50\x22}),e.jsxs(m,{title:`${s(\x22Client\x22)}  : ${t.client.name}`,column:1,children:[e.jsx(m.Item,{label:s(\x22email\x22),children:j.email}),e.jsx(m.Item,{label:s(\x22phone\x22),children:j.phone}),e.jsx(_,{dashed:!0}),e.jsx(m.Item,{label:s(\x22payment status\x22),children:e.jsx(\x22span\x22,{children:t.paymentStatus&&s(t.paymentStatus)})}),e.jsx(m.Item,{label:s(\x22sub total\x22),children:d.moneyFormatter({amount:t.subTotal,currency_code:t.currency})}),e.jsx(m.Item,{label:s(\x22total\x22),children:d.moneyFormatter({amount:t.total,currency_code:t.currency})}),e.jsx(m.Item,{label:s(\x22discount\x22),children:d.moneyFormatter({amount:t.discount,currency_code:t.currency})}),e.jsx(m.Item,{label:s(\x22Paid\x22),children:d.moneyFormatter({amount:t.credit,currency_code:t.currency})})]})]}),e.jsx(E,{className:\x22gutter-row\x22,xs:{span:24,order:1},sm:{span:24,order:1},md:{span:12,order:1},lg:{span:10,order:1,push:2},children:e.jsx(W,{config:o})})]})]})}function G({config:o}){const n=N(),{id:s}=A();let r=I($(s));a.useEffect(()=\x3e{n(r?p.currentItem({data:r}):p.read({entity:o.entity,id:s}))},[r,s]);const{result:c}=I(w);return r=c,a.useEffect(()=\x3e{n(p.currentAction({actionType:\x22recordPayment\x22,data:r}))},[r]),e.jsx(D,{children:r?e.jsx(q,{config:o,currentItem:c}):e.jsx(F,{})})}function ue(){const o=\x22invoice\x22,n=b(),s={PANEL_TITLE:n(\x22invoice\x22),DATATABLE_TITLE:n(\x22invoice_list\x22),ADD_NEW_ENTITY:n(\x22add_new_invoice\x22),ENTITY_NAME:n(\x22invoice\x22),RECORD_ENTITY:n(\x22record_payment\x22)},r={entity:o,...s};return e.jsx(G,{config:r})}export{ue as default};\x0a'}