var res = {'data':'HTTP/1.1 200 Partial Content\x0aServer: nginx/1.29.1\x0aDate: Wed, 01 Oct 2025 06:45:33 GMT\x0aContent-Type: application/javascript\x0aContent-Length: 4360\x0aLast-Modified: Wed, 01 Oct 2025 04:26:03 GMT\x0aConnection: keep-alive\x0aETag: \x2268dcad5b-1108\x22\x0aExpires: Thu, 01 Oct 2026 06:45:33 GMT\x0aCache-Control: max-age=31536000\x0aCache-Control: public, immutable\x0aContent-Range: bytes 0-4359/4360\x0a\x0aimport{aq as A,ar as S,ap as $,a as i,ah as e,as as D,ax as I}from\x22./index-C4nMWe5y.js\x22;import{a0 as b,a2 as U,E as _,G as L,Y as F,W as T,X as P,a1 as M}from\x22./IdurarOs-BCtZVZqe.js\x22;import\x22./index-CCAhvlYD.js\x22;import{e as B,s as R,E as C}from\x22./selectors-DquMLP7b.js\x22;import{e as y}from\x22./actions-ysozhQMY.js\x22;import{d as Y,P as k}from\x22./index-Ci5STuGe.js\x22;import{s as N}from\x22./index-KrFx5yLV.js\x22;import{u as v}from\x22./useMoney-5XCsrR9m.js\x22;import\x22./ErpApp-BZucdkXu.js\x22;import{c as f}from\x22./calculate-DbSGk6nY.js\x22;import{P as O,F as W}from\x22./PaymentForm-Ckxurmtb.js\x22;import{D as c}from\x22./index-IHz-65YD.js\x22;import{C as q}from\x22./CloseCircleOutlined-Bi0FNh2q.js\x22;import\x22./DownOutlined-BXn_Bs08.js\x22;import\x22./index-D1pTFRzE.js\x22;import\x22./index-DyraH4Lq.js\x22;import\x22./useFetch-CPBJnrcm.js\x22;import\x22./color-CnuJOIlI.js\x22;import\x22./index-Bc3jZFJd.js\x22;import\x22./useDate-BK7OBCbi.js\x22;import\x22./index-6VrU-YIl.js\x22;function G({config:n,currentInvoice:s}){const a=L(),r=A();let{entity:l}=n;const o=S(),{isLoading:d,isSuccess:t}=$(B),[u]=b.useForm(),[h,g]=i.useState(0);i.useEffect(()=\x3e{if(s){const{credit:m,total:p,discount:x,amount:w}=s;g(f.sub(f.sub(p,x),f.sub(f.sub(m,w))));const j={...s};j.date&&(j.date=Y(j.date)),u.setFieldsValue(j)}},[s]),i.useEffect(()=\x3e{t&&(u.resetFields(),o(y.resetAction({actionType:\x22recordPayment\x22})),o(y.list({entity:l})),r(`/${l.toLowerCase()}/read/${s._id}`))},[t]);const E=m=\x3e{if(s){const{_id:p}=s,x=s.client&&s.client._id;m={...m,invoice:p,client:x}}o(y.update({entity:l,id:s._id,jsonData:m}))};return e.jsx(e.Fragment,{children:e.jsx(U,{isLoading:d,children:e.jsxs(b,{form:u,layout:\x22vertical\x22,onFinish:E,children:[e.jsx(O,{maxAmount:h}),e.jsx(b.Item,{children:e.jsx(_,{type:\x22primary\x22,htmlType:\x22submit\x22,children:a(\x22Update\x22)})})]})})})}function H({config:n,currentItem:s}){const a=L(),{entity:r,ENTITY_NAME:l}=n,o=v(),d=A(),[t,u]=i.useState(s);i.useEffect(()=\x3e{const E=new AbortController;if(s){const{invoice:m,_id:p,...x}=s;u({...x,...m,_id:p})}return()=\x3eE.abort()},[s]);const[h,g]=i.useState({});return i.useEffect(()=\x3e{t!=null&&t.client&&g(t.client)},[t]),e.jsxs(e.Fragment,{children:[e.jsx(F,{gutter:[12,12],children:e.jsxs(T,{className:\x22gutter-row\x22,xs:{span:24},sm:{span:24},md:{span:24},lg:{span:20,push:2},children:[e.jsx(k,{onBack:()=\x3ed(`/${r.toLowerCase()}`),title:`Update  ${l} # ${t.number}/${t.year||\x22\x22}`,ghost:!1,tags:e.jsx(\x22span\x22,{children:t.paymentStatus}),extra:[e.jsx(_,{onClick:()=\x3e{d(`/${r.toLowerCase()}`)},icon:e.jsx(q,{}),children:a(\x22Cancel\x22)},`${N.generate()}`),e.jsx(_,{onClick:()=\x3ed(`/invoice/read/${t._id}`),icon:e.jsx(W,{}),children:a(\x22Show invoice\x22)},`${N.generate()}`)],style:{padding:\x2220px 0px\x22}}),e.jsx(P,{dashed:!0})]})}),e.jsxs(F,{gutter:[12,12],children:[e.jsxs(T,{className:\x22gutter-row\x22,xs:{span:24,order:2},sm:{span:24,order:2},md:{span:10,order:2,push:2},lg:{span:10,order:2,push:4},children:[e.jsx(\x22div\x22,{className:\x22space50\x22}),e.jsxs(c,{title:`${a(\x22Client\x22)} : ${t.client.name}`,column:1,children:[e.jsx(c.Item,{label:a(\x22email\x22),children:h.email}),e.jsx(c.Item,{label:a(\x22Phone\x22),children:h.phone}),e.jsx(P,{dashed:!0}),e.jsx(c.Item,{label:a(\x22Payment Status\x22),children:e.jsx(\x22span\x22,{children:t.paymentStatus})}),e.jsx(c.Item,{label:a(\x22SubTotal\x22),children:o.moneyFormatter({amount:t.subTotal,currency_code:t.currency})}),e.jsx(c.Item,{label:a(\x22Total\x22),children:o.moneyFormatter({amount:t.total,currency_code:t.currency})}),e.jsx(c.Item,{label:\x22Discount\x22,children:o.moneyFormatter({amount:t.discount,currency_code:t.currency})}),e.jsx(c.Item,{label:\x22Balance\x22,children:o.moneyFormatter({amount:t.credit,currency_code:t.currency})})]})]}),e.jsx(T,{className:\x22gutter-row\x22,xs:{span:24,order:1},sm:{span:24,order:1},md:{span:12,order:1},lg:{span:10,order:1,push:2},children:e.jsx(G,{config:n,currentInvoice:t})})]})]})}function X({config:n}){const s=S(),{id:a}=D();i.useLayoutEffect(()=\x3e{s(y.read({entity:n.entity,id:a}))},[a]);const{result:r,isSuccess:l,isLoading:o=!0}=$(R);return i.useLayoutEffect(()=\x3e{r&&s(y.currentAction({actionType:\x22update\x22,id:a,data:r}))},[r]),o?e.jsx(C,{children:e.jsx(I,{})}):e.jsx(C,{children:l?e.jsx(H,{config:n,currentItem:r}):e.jsx(M,{entity:n.entity})})}function ye(){const n=L(),s=\x22payment\x22,a={PANEL_TITLE:n(\x22payment\x22),DATATABLE_TITLE:n(\x22payment_list\x22),ADD_NEW_ENTITY:n(\x22add_new_payment\x22),ENTITY_NAME:n(\x22payment\x22)},r={entity:s,...a};return e.jsx(X,{config:r})}export{ye as default};\x0a'}